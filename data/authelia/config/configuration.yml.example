# Authelia configuration (PostgreSQL storage)
# Copy to configuration.yml and edit. Secrets (JWT, session, storage password, encryption key)
# are read from files in data/authelia/secrets/ via environment variables.
# https://www.authelia.com/configuration/prologue/introduction/

server:
  address: 'tcp://:9091'

log:
  level: info

totp:
  issuer: 'authelia'

# JWT secret: from file /secrets/JWT_SECRET (env AUTHELIA_IDENTITY_VALIDATION_RESET_PASSWORD_JWT_SECRET_FILE)
identity_validation:
  reset_password: {}

authentication_backend:
  file:
    path: '/config/users_database.yml'

access_control:
  default_policy: 'deny'
  rules:
    - domain: 'public.example.com'
      policy: 'bypass'
    - domain: 'auth.example.com'
      policy: 'one_factor'
    - domain: 'secure.example.com'
      policy: 'two_factor'

# Session secret: from file /secrets/SESSION_SECRET (env AUTHELIA_SESSION_SECRET_FILE)
session:
  cookies:
    - name: 'authelia_session'
      domain: 'example.com'
      authelia_url: 'https://auth.example.com'
      expiration: '1 hour'
      inactivity: '5 minutes'
      default_redirection_url: 'https://public.example.com'

regulation:
  max_retries: 3
  find_time: '2 minutes'
  ban_time: '5 minutes'

# storage.encryption_key: from file /secrets/STORAGE_ENCRYPTION_KEY
# storage.postgres.password: from file /secrets/STORAGE_PASSWORD
storage:
  postgres:
    address: 'tcp://postgres:5432'
    database: 'lymphhub'
    schema: 'public'
    username: 'admin_Lymphhub'

notifier:
  filesystem:
    filename: '/config/notification.txt'
